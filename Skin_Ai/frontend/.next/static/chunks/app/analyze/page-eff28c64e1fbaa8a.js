(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[241],{1293:function(e,t,a){Promise.resolve().then(a.bind(a,8821))},8821:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return U}});var s=a(7437),r=a(7942),n=a(2265),i=a(495),l=a(7440);function c(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,l.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,l.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,l.cn)("leading-none font-semibold",t),...a})}function u(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,l.cn)("text-muted-foreground text-sm",t),...a})}function x(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,l.cn)("px-6",t),...a})}let h=0,m=new Map,p=e=>{if(m.has(e))return;let t=setTimeout(()=>{m.delete(e),v({type:"REMOVE_TOAST",toastId:e})},1e6);m.set(e,t)},g=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?p(a):e.toasts.forEach(e=>{p(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},y=[],f={toasts:[]};function v(e){f=g(f,e),y.forEach(e=>{e(f)})}function j(e){let{...t}=e,a=(h=(h+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>v({type:"DISMISS_TOAST",toastId:a});return v({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>v({type:"UPDATE_TOAST",toast:{...e,id:a}})}}let b={BASE_URL:a(357).env.NEXT_PUBLIC_API_URL||"http://localhost:8000",ENDPOINTS:{DIAGNOSIS:"/api/diagnosis/analyze/"},TIMEOUT:3e5},N=e=>"".concat(b.BASE_URL).concat(e);class w{async analyzeSkinVideo(e,t){let a=new FormData;a.append("video",e),t&&a.append("language_prompt",t);try{let e=await fetch(N(b.ENDPOINTS.DIAGNOSIS),{method:"POST",body:a});if(!e.ok){let t=await e.json().catch(()=>({error:"Erreur HTTP: ".concat(e.status," ").concat(e.statusText)}));throw Error(t.error||"Erreur ".concat(e.status))}return await e.json()}catch(e){if(e instanceof Error)throw e;throw Error("Erreur inconnue lors de l'analyse de la vid\xe9o")}}async checkBackendHealth(){try{return await fetch("".concat(b.BASE_URL,"/admin/"),{method:"HEAD",mode:"no-cors"}),!0}catch(e){return!1}}}let T=new w;var k=a(8954),S=a(8030);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let _=(0,S.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),E=(0,S.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var A=a(6780),z=a(3231);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let P=(0,S.Z)("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);var O=a(5293);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let I=(0,S.Z)("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),C=(0,a(3027).j)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function D(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,l.cn)(C({variant:a}),t),...r})}function Z(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-title",className:(0,l.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...a})}function M(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,l.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}var L=a(459);function V(){var e,t,a;let[r,l]=(0,n.useState)(null),[h,m]=(0,n.useState)(null),[p,g]=(0,n.useState)(!1),[b,N]=(0,n.useState)(null),[w,S]=(0,n.useState)(null),C=(0,n.useRef)(null),{toast:V}=function(){let[e,t]=n.useState(f);return n.useEffect(()=>(y.push(t),()=>{let e=y.indexOf(t);e>-1&&y.splice(e,1)}),[e]),{...e,toast:j,dismiss:e=>v({type:"DISMISS_TOAST",toastId:e})}}(),{getGeminiLanguagePrompt:R,t:U}=(0,L.ZK)(),B=async()=>{if(!r){V({title:U.analyzePage.noVideoSelected,description:U.analyzePage.noVideoDescription,variant:"destructive"});return}g(!0),S(null),N(null);try{let e=R(),t=await T.analyzeSkinVideo(r,e);N(t),V({title:U.analyzePage.analysisComplete,description:U.analyzePage.analysisCompleteDescription})}catch(t){let e=t instanceof Error?t.message:"Une erreur est survenue";S(e),V({title:U.analyzePage.analysisError,description:e,variant:"destructive"})}finally{g(!1)}};return(0,s.jsx)("div",{className:"container mx-auto px-6 py-12 max-w-4xl",children:(0,s.jsxs)(c,{className:"border-white/10 bg-black/40 backdrop-blur-xl",children:[(0,s.jsxs)(o,{children:[(0,s.jsxs)(d,{className:"flex items-center gap-2 text-white",children:[(0,s.jsx)(k.Z,{className:"h-5 w-5 text-primary"}),U.analyzePage.skinAnalysisTitle]}),(0,s.jsx)(u,{className:"text-gray-400",children:U.analyzePage.skinAnalysisDescription})]}),(0,s.jsxs)(x,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("input",{ref:C,type:"file",accept:"video/*",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&(a.type.startsWith("video/")?(l(a),S(null),N(null),m(URL.createObjectURL(a))):V({title:U.analyzePage.invalidFormat,description:U.analyzePage.invalidFormatDescription,variant:"destructive"}))},className:"hidden",id:"video-upload",disabled:p}),(0,s.jsxs)(i.z,{variant:"outline",onClick:()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.click()},disabled:p,className:"flex items-center gap-2 border-primary/20 bg-white/5 text-white hover:bg-white/10 hover:text-primary",children:[(0,s.jsx)(_,{className:"h-4 w-4"}),r?U.analyzePage.changeVideo:U.analyzePage.selectVideo]}),r&&(0,s.jsxs)("span",{className:"text-sm text-gray-400",children:[r.name," (",(r.size/1024/1024).toFixed(2)," MB)"]})]}),h&&(0,s.jsx)("div",{className:"relative w-full max-w-md mx-auto mt-6",children:(0,s.jsx)("div",{className:"rounded-xl overflow-hidden border border-white/10 shadow-2xl bg-black",children:(0,s.jsx)("video",{src:h,controls:!0,playsInline:!0,className:"w-full h-auto max-h-[400px]"})})})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(i.z,{onClick:B,disabled:!r||p,className:"flex items-center gap-2 bg-primary text-black hover:bg-primary/90",children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E,{className:"h-4 w-4 animate-spin"}),U.analyzePage.analysisInProgress]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.Z,{className:"h-4 w-4"}),U.analyzePage.analyzeButton]})}),(r||b)&&(0,s.jsx)(i.z,{variant:"outline",onClick:()=>{l(null),m(null),N(null),S(null),C.current&&(C.current.value="")},disabled:p,className:"border-white/10 text-gray-300 hover:bg-white/5",children:U.analyzePage.resetButton})]}),w&&(0,s.jsxs)(D,{variant:"destructive",children:[(0,s.jsx)(A.Z,{className:"h-4 w-4"}),(0,s.jsx)(Z,{children:"Error"}),(0,s.jsx)(M,{children:w})]}),b&&(0,s.jsxs)("div",{className:"space-y-6 mt-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,s.jsxs)(D,{className:"bg-green-500/10 border-green-500/20 text-green-500",children:[(0,s.jsx)(z.Z,{className:"h-4 w-4"}),(0,s.jsx)(Z,{children:U.analyzePage.analysisComplete}),(0,s.jsx)(M,{children:U.analyzePage.analysisCompleteDescription})]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)(c,{className:"bg-white/5 border-primary/20",children:[(0,s.jsx)(o,{children:(0,s.jsx)(d,{className:"text-lg text-primary",children:U.results.possibleDiagnosis})}),(0,s.jsxs)(x,{children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-white",children:b.diagnostic_probable}),(0,s.jsxs)("p",{className:"text-sm text-gray-400 mt-2",children:[U.results.confidence,": ",(0,s.jsx)("span",{className:"text-primary",children:b.confiance_ia})]})]})]}),(0,s.jsxs)(c,{className:"bg-white/5 border-primary/20",children:[(0,s.jsx)(o,{children:(0,s.jsx)(d,{className:"text-lg text-primary",children:U.results.urgency})}),(0,s.jsxs)(x,{children:[(0,s.jsx)("p",{className:"text-2xl font-bold ".concat((e=>{let t=(null==e?void 0:e.toLowerCase())||"";return t.includes("haute")||t.includes("high")||t.includes("\xe9lev\xe9e")?"text-red-500":t.includes("moyenne")||t.includes("medium")?"text-yellow-500":"text-green-500"})(b.niveau_urgence)),children:b.niveau_urgence}),(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-gray-300",children:[(0,s.jsx)(P,{className:"w-4 h-4 text-primary"}),b.recommandation_specialiste]})]})]})]}),(0,s.jsxs)(c,{className:"bg-white/5 border-white/5",children:[(0,s.jsx)(o,{children:(0,s.jsx)(d,{className:"text-lg text-white",children:U.results.temporalAnalysis})}),(0,s.jsx)(x,{children:(0,s.jsx)("p",{className:"text-gray-300 leading-relaxed",children:b.analyse_detaillee})})]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)(c,{className:"bg-white/5 border-white/5",children:[(0,s.jsx)(o,{children:(0,s.jsx)(d,{className:"text-lg text-white",children:U.results.symptoms})}),(0,s.jsx)(x,{children:(0,s.jsx)("ul",{className:"list-disc list-inside space-y-2 text-gray-300",children:(null===(e=b.symptomes_cles)||void 0===e?void 0:e.map((e,t)=>(0,s.jsx)("li",{children:e},t)))||(0,s.jsx)("li",{children:"Aucun sympt\xf4me d\xe9tect\xe9"})})})]}),(0,s.jsxs)(c,{className:"bg-white/5 border-green-500/20",children:[(0,s.jsx)(o,{children:(0,s.jsxs)(d,{className:"text-lg text-green-400 flex items-center gap-2",children:[(0,s.jsx)(O.Z,{className:"w-5 h-5"})," Routine Saine"]})}),(0,s.jsx)(x,{children:(0,s.jsx)("ul",{className:"list-none space-y-3",children:(null===(t=b.routine_naturelle)||void 0===t?void 0:t.map((e,t)=>(0,s.jsxs)("li",{className:"flex gap-2 text-gray-300 text-sm",children:[(0,s.jsx)("span",{className:"text-green-500 mt-1",children:"✓"})," ",e]},t)))||(0,s.jsx)("li",{children:"Aucune routine sp\xe9cifique"})})})]})]}),(0,s.jsxs)(c,{className:"bg-red-500/10 border-red-500/20",children:[(0,s.jsx)(o,{children:(0,s.jsxs)(d,{className:"text-lg text-red-400 flex items-center gap-2",children:[(0,s.jsx)(I,{className:"w-5 h-5"})," \xc0 \xc9viter Absolument"]})}),(0,s.jsx)(x,{children:(0,s.jsx)("ul",{className:"grid gap-2 md:grid-cols-2",children:(null===(a=b.a_eviter_absolument)||void 0===a?void 0:a.map((e,t)=>(0,s.jsxs)("li",{className:"flex gap-2 text-gray-300 text-sm items-start bg-black/20 p-2 rounded",children:[(0,s.jsx)("span",{className:"text-red-500 font-bold",children:"✕"})," ",e]},t)))||(0,s.jsx)("li",{children:"Rien de sp\xe9cifique \xe0 signaler"})})})]})]})]})]})})}var R=a(2476);function U(){let{t:e}=(0,L.ZK)();return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)(r.h,{}),(0,s.jsxs)("main",{className:"pt-16 pb-12",children:[(0,s.jsxs)("div",{className:"container mx-auto px-6 mb-8 text-center",children:[(0,s.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:e.analyzePage.title}),(0,s.jsx)("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:e.analyzePage.subtitle})]}),(0,s.jsx)(V,{})]}),(0,s.jsx)(R.$,{})]})}},6780:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(8030).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3231:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(8030).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},5293:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(8030).Z)("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]])},8954:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(8030).Z)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},357:function(e,t,a){"use strict";var s,r;e.exports=(null==(s=a.g.process)?void 0:s.env)&&"object"==typeof(null==(r=a.g.process)?void 0:r.env)?a.g.process:a(8081)},8081:function(e){!function(){var t={229:function(e){var t,a,s,r=e.exports={};function n(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(a){try{return t.call(null,e,0)}catch(a){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{a="function"==typeof clearTimeout?clearTimeout:i}catch(e){a=i}}();var c=[],o=!1,d=-1;function u(){o&&s&&(o=!1,s.length?c=s.concat(c):d=-1,c.length&&x())}function x(){if(!o){var e=l(u);o=!0;for(var t=c.length;t;){for(s=c,c=[];++d<t;)s&&s[d].run();d=-1,t=c.length}s=null,o=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===i||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];c.push(new h(e,t)),1!==c.length||o||l(x)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},a={};function s(e){var r=a[e];if(void 0!==r)return r.exports;var n=a[e]={exports:{}},i=!0;try{t[e](n,n.exports,s),i=!1}finally{i&&delete a[e]}return n.exports}s.ab="//";var r=s(229);e.exports=r}()}},function(e){e.O(0,[290,856,971,23,744],function(){return e(e.s=1293)}),_N_E=e.O()}]);